var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{L:()=>vt});const n=Object.keys;function o(e){return"string"==typeof e}function r(e){return"number"==typeof e}function i(e){return"object"==typeof e?null!==e:a(e)}function a(e){return"function"==typeof e}function s(e,t){if(e)for(const o of n(e))t(e[o],o)}const l={animationIterationCount:0,borderImageOutset:0,borderImageSlice:0,borderImageWidth:0,boxFlex:0,boxFlexGroup:0,boxOrdinalGroup:0,columnCount:0,columns:0,flex:0,flexGrow:0,flexPositive:0,flexShrink:0,flexNegative:0,flexOrder:0,gridArea:0,gridRow:0,gridRowEnd:0,gridRowSpan:0,gridRowStart:0,gridColumn:0,gridColumnEnd:0,gridColumnSpan:0,gridColumnStart:0,fontWeight:0,lineClamp:0,lineHeight:0,opacity:0,order:0,orphans:0,tabSize:0,widows:0,zIndex:0,zoom:0,fillOpacity:0,floodOpacity:0,stopOpacity:0,strokeDasharray:0,strokeDashoffset:0,strokeMiterlimit:0,strokeOpacity:0,strokeWidth:0},d=["Webkit","ms","Moz","O"];n(l).forEach((e=>{d.forEach((t=>{l[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=0}))}));const c=Symbol.for("jsx-dom:type");var u=function(e){return e.ShadowRoot="ShadowRoot",e}(u||{});const f="http://www.w3.org/1999/xlink",p="http://www.w3.org/XML/1998/namespace";function h(e){return!("boolean"==typeof e||null==e)}function v(e){return Array.isArray(e)?e.map(v).filter(Boolean).join(" "):i(e)?Symbol.iterator in e?v(Array.from(e)):n(e).filter((t=>e[t])).join(" "):h(e)?""+e:""}const m={animate:0,circle:0,clipPath:0,defs:0,desc:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,foreignObject:0,g:0,image:0,line:0,linearGradient:0,marker:0,mask:0,metadata:0,path:0,pattern:0,polygon:0,polyline:0,radialGradient:0,rect:0,stop:0,svg:0,switch:0,symbol:0,text:0,textPath:0,tspan:0,use:0,view:0},b=/^(a(ll|t|u)|base[FP]|c(al|lipPathU|on)|di|ed|ex|filter[RU]|g(lyphR|r)|ke|l(en|im)|ma(rker[HUW]|s)|n|pat|pr|point[^e]|re[^n]|s[puy]|st[^or]|ta|textL|vi|xC|y|z)/;function g(e,t){let r,{children:s,...l}=t;if(l.namespaceURI||0!==m[e]||(l={...l,namespaceURI:"http://www.w3.org/2000/svg"}),o(e)){if(r=l.namespaceURI?document.createElementNS(l.namespaceURI,e):document.createElement(e),function(e,t){for(const o of n(e))A(o,e[o],t)}(l,r),y(s,r),r instanceof window.HTMLSelectElement&&null!=l.value)if(!0===l.multiple&&Array.isArray(l.value)){const e=l.value.map((e=>String(e)));r.querySelectorAll("option").forEach((t=>t.selected=e.includes(t.value)))}else r.value=l.value;w(l.ref,r)}else{if(!a(e))throw new TypeError(`Invalid JSX element type: ${e}`);i(e.defaultProps)&&(l={...e.defaultProps,...l}),r=function(e){const{prototype:t}=e;return!(!t||!t.isReactComponent)}(e)?function(e,t,n){const o=new e(t={...t,children:n}),r=o.render();return"ref"in t&&w(t.ref,o),r}(e,l,s):e({...l,children:s})}return r}function w(e,t){var n;i(n=e)&&"current"in n?e.current=t:a(e)&&e(t)}function y(e,t){if(i(s=e)&&"number"==typeof s.length&&"number"!=typeof s.nodeType)!function(e,t){for(const n of[...e])y(n,t)}(e,t);else if(o(e)||r(e))_(document.createTextNode(e),t);else if(null===e)_(document.createComment(""),t);else if((a=e)&&"number"==typeof a.nodeType)_(e,t);else if(null!=(n=e)&&n[c]===u.ShadowRoot){const n=t.attachShadow(e.attr);y(e.children,n),w(e.ref,n)}var n,a,s}function _(e,t){t instanceof window.HTMLTemplateElement?t.content.appendChild(e):t.appendChild(e)}function E(e,t){return e.replace(/[A-Z]/g,(e=>t+e.toLowerCase()))}function S(e,t){null==t||!1===t||(Array.isArray(t)?t.forEach((t=>S(e,t))):o(t)?e.setAttribute("style",t):i(t)&&s(t,((t,n)=>{0===n.indexOf("-")?e.style.setProperty(n,t):r(t)&&0!==l[n]?e.style[n]=t+"px":e.style[n]=t})))}function A(e,t,n){switch(e){case"xlinkActuate":case"xlinkArcrole":case"xlinkHref":case"xlinkRole":case"xlinkShow":case"xlinkTitle":case"xlinkType":return void x(n,f,E(e,":"),t);case"xmlnsXlink":return void N(n,E(e,":"),t);case"xmlBase":case"xmlLang":case"xmlSpace":return void x(n,p,E(e,":"),t)}switch(e){case"htmlFor":return void N(n,"for",t);case"dataset":return void s(t,((e,t)=>{null!=e&&(n.dataset[t]=e)}));case"innerHTML":case"innerText":case"textContent":return void(h(t)&&(n[e]=t));case"dangerouslySetInnerHTML":return void(i(t)&&(n.innerHTML=t.__html));case"value":if(null==t||n instanceof window.HTMLSelectElement)return;if(n instanceof window.HTMLTextAreaElement)return void(n.value=t);break;case"spellCheck":return void(n.spellcheck=t);case"class":case"className":return void(a(t)?t(n):N(n,"class",v(t)));case"ref":case"namespaceURI":return;case"style":return void S(n,t);case"on":case"onCapture":return void s(t,((t,o)=>{n.addEventListener(o,t,"onCapture"===e)}))}if(a(t)){if("o"===e[0]&&"n"===e[1]){let o=e.toLowerCase();const r=o.endsWith("capture");if("ondoubleclick"===o?o="ondblclick":r&&"ondoubleclickcapture"===o&&(o="ondblclickcapture"),r||null!==n[o])if(r)n.addEventListener(o.substring(2,o.length-7),t,!0);else{let r;r=o in window?o.substring(2):o[2]+e.slice(3),n.addEventListener(r,t)}else n[o]=t}}else i(t)?n[e]=t:!0===t?N(n,e,""):!1!==t&&null!=t&&(n instanceof SVGElement&&!b.test(e)?N(n,E(e,"-"),t):N(n,e,t))}function N(e,t,n){e.setAttribute(t,n)}function x(e,t,n,o){e.setAttributeNS(t,n,o)}var T,C={d:(e,t)=>{for(var n in t)C.o(t,n)&&!C.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},L={};C.d(L,{ZU:()=>K,L8:()=>J,wk:()=>$,R9:()=>Y});var R="undefined"==typeof document?void 0:document,k=!!R&&"content"in R.createElement("template"),O=!!R&&R.createRange&&"createContextualFragment"in R.createRange();function U(e,t){var n,o,r=e.nodeName,i=t.nodeName;return r===i||(n=r.charCodeAt(0),o=i.charCodeAt(0),n<=90&&o>=97?r===i.toUpperCase():o<=90&&n>=97&&i===r.toUpperCase())}function H(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var M={OPTION:function(e,t){var n=e.parentNode;if(n){var o=n.nodeName.toUpperCase();"OPTGROUP"===o&&(o=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==o||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}H(e,t,"selected")},INPUT:function(e,t){H(e,t,"checked"),H(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var o=e.firstChild;if(o){var r=o.nodeValue;if(r==n||!n&&r==e.placeholder)return;o.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,o,r=-1,i=0,a=e.firstChild;a;)if("OPTGROUP"===(o=a.nodeName&&a.nodeName.toUpperCase()))a=(n=a).firstChild;else{if("OPTION"===o){if(a.hasAttribute("selected")){r=i;break}i++}!(a=a.nextSibling)&&n&&(a=n.nextSibling,n=null)}e.selectedIndex=r}}};function I(){}function z(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}const P=function(e,t,n){if(n||(n={}),"string"==typeof t)if("#document"===e.nodeName||"HTML"===e.nodeName||"BODY"===e.nodeName){var o=t;(t=R.createElement("html")).innerHTML=o}else r=(r=t).trim(),t=k?function(e){var t=R.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(r):O?function(e){return T||(T=R.createRange()).selectNode(R.body),T.createContextualFragment(e).childNodes[0]}(r):function(e){var t=R.createElement("body");return t.innerHTML=e,t.childNodes[0]}(r);else 11===t.nodeType&&(t=t.firstElementChild);var r,i=n.getNodeKey||z,a=n.onBeforeNodeAdded||I,s=n.onNodeAdded||I,l=n.onBeforeElUpdated||I,d=n.onElUpdated||I,c=n.onBeforeNodeDiscarded||I,u=n.onNodeDiscarded||I,f=n.onBeforeElChildrenUpdated||I,p=n.skipFromChildren||I,h=n.addChild||function(e,t){return e.appendChild(t)},v=!0===n.childrenOnly,m=Object.create(null),b=[];function g(e){b.push(e)}function w(e,t){if(1===e.nodeType)for(var n=e.firstChild;n;){var o=void 0;t&&(o=i(n))?g(o):(u(n),n.firstChild&&w(n,t)),n=n.nextSibling}}function y(e,t,n){!1!==c(e)&&(t&&t.removeChild(e),u(e),w(e,n))}function _(e){if(1===e.nodeType||11===e.nodeType)for(var t=e.firstChild;t;){var n=i(t);n&&(m[n]=t),_(t),t=t.nextSibling}}function E(e){s(e);for(var t=e.firstChild;t;){var n=t.nextSibling,o=i(t);if(o){var r=m[o];r&&U(t,r)?(t.parentNode.replaceChild(r,t),S(r,t)):E(t)}else E(t);t=n}}function S(e,t,n){var o=i(t);if(o&&delete m[o],!n){var r=l(e,t);if(!1===r)return;if(r instanceof HTMLElement&&_(e=r),function(e,t){var n,o,r,i,a=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var s=a.length-1;s>=0;s--)o=(n=a[s]).name,r=n.namespaceURI,i=n.value,r?(o=n.localName||o,e.getAttributeNS(r,o)!==i&&("xmlns"===n.prefix&&(o=n.name),e.setAttributeNS(r,o,i))):e.getAttribute(o)!==i&&e.setAttribute(o,i);for(var l=e.attributes,d=l.length-1;d>=0;d--)o=(n=l[d]).name,(r=n.namespaceURI)?(o=n.localName||o,t.hasAttributeNS(r,o)||e.removeAttributeNS(r,o)):t.hasAttribute(o)||e.removeAttribute(o)}}(e,t),d(e),!1===f(e,t))return}"TEXTAREA"!==e.nodeName?function(e,t){var n,o,r,s,l,d=p(e,t),c=t.firstChild,u=e.firstChild;e:for(;c;){for(s=c.nextSibling,n=i(c);!d&&u;){if(r=u.nextSibling,c.isSameNode&&c.isSameNode(u)){c=s,u=r;continue e}o=i(u);var f=u.nodeType,v=void 0;if(f===c.nodeType&&(1===f?(n?n!==o&&((l=m[n])?r===l?v=!1:(e.insertBefore(l,u),o?g(o):y(u,e,!0),o=i(u=l)):v=!1):o&&(v=!1),(v=!1!==v&&U(u,c))&&S(u,c)):3!==f&&8!=f||(v=!0,u.nodeValue!==c.nodeValue&&(u.nodeValue=c.nodeValue))),v){c=s,u=r;continue e}o?g(o):y(u,e,!0),u=r}if(n&&(l=m[n])&&U(l,c))d||h(e,l),S(l,c);else{var b=a(c);!1!==b&&(b&&(c=b),c.actualize&&(c=c.actualize(e.ownerDocument||R)),h(e,c),E(c))}c=s,u=r}!function(e,t,n){for(;t;){var o=t.nextSibling;(n=i(t))?g(n):y(t,e,!0),t=o}}(e,u,o);var w=M[e.nodeName];w&&w(e,t)}(e,t):M.TEXTAREA(e,t)}_(e);var A,N,x=e,C=x.nodeType,L=t.nodeType;if(!v)if(1===C)1===L?U(e,t)||(u(e),x=function(e,t){for(var n=e.firstChild;n;){var o=n.nextSibling;t.appendChild(n),n=o}return t}(e,(A=t.nodeName,(N=t.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==N?R.createElementNS(N,A):R.createElement(A)))):x=t;else if(3===C||8===C){if(L===C)return x.nodeValue!==t.nodeValue&&(x.nodeValue=t.nodeValue),x;x=t}if(x===t)u(e);else{if(t.isSameNode&&t.isSameNode(x))return;if(S(x,t,v),b)for(var H=0,P=b.length;H<P;H++){var D=m[b[H]];D&&y(D,D.parentNode,!1)}}return!v&&x!==e&&e.parentNode&&(x.actualize&&(x=x.actualize(e.ownerDocument||R)),e.parentNode.replaceChild(x,e)),x},D={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let j;const F=new Uint8Array(16);function V(){if(!j){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");j=crypto.getRandomValues.bind(crypto)}return j(F)}const B=[];for(let e=0;e<256;++e)B.push((e+256).toString(16).slice(1));const G=function(e,t,n){if(D.randomUUID&&!t&&!e)return D.randomUUID();const o=(e=e||{}).random||(e.rng||V)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return(B[e[t+0]]+B[e[t+1]]+B[e[t+2]]+B[e[t+3]]+"-"+B[e[t+4]]+B[e[t+5]]+"-"+B[e[t+6]]+B[e[t+7]]+"-"+B[e[t+8]]+B[e[t+9]]+"-"+B[e[t+10]]+B[e[t+11]]+B[e[t+12]]+B[e[t+13]]+B[e[t+14]]+B[e[t+15]]).toLowerCase()}(o)};class W extends HTMLElement{}customElements.define("reactor-viewport",W);class q{_id;_state;_render;_viewport;_shadowRoot;_root;_emit=new Map;_globalEvents=new Map;_localEvents=new Map;_debug;_resizeObserver;_resizeUserHandler;_deferredRedraw=!1;constructor(e){if(this._id=G(),this._state=e.initialState,this._render=e.render,this._viewport=document.createElement("reactor-viewport"),this._viewport.classList.add("viewport"),this._viewport.dataset.id=this._id,e.id&&(this._viewport.id=e.id),this._shadowRoot=this._viewport.attachShadow({mode:"closed",clonable:!0,delegatesFocus:!0}),this._root=this._render(this._state),this._shadowRoot.appendChild(this._root),e.styles&&this._shadowRoot.adoptedStyleSheets.push(e.styles),this._debug=!!e.debug,this._globalEventHandler=this._globalEventHandler.bind(this),this._localEventHandler=this._localEventHandler.bind(this),this._resizeHandler=this._resizeHandler.bind(this),e.events)for(const t in e.events)Object.hasOwn(e.events,t)&&("function"==typeof e.events[t]?this._localEvents.set(t,e.events[t]):this._globalEvents.set(t,e.events[t].handler));if(e.emit)for(const t of e.emit)this._emit.set(t.when,new Set(Array.isArray(t.emit)?t.emit:[t.emit]));for(const e of this._localEvents.keys())this._shadowRoot.addEventListener(e,this._localEventHandler,!0);for(const e of this._globalEvents.keys())window.addEventListener(e,this._globalEventHandler,!0);e.onResize&&(this._resizeUserHandler=e.onResize,this._resizeObserver=new ResizeObserver(this._resizeHandler),this._resizeObserver.observe(this._viewport))}destructor(){for(const e of this._localEvents.keys())this._shadowRoot.removeEventListener(e,this._localEventHandler,!0);for(const e of this._globalEvents.keys())window.removeEventListener(e,this._globalEventHandler,!0);this._resizeObserver&&this._resizeObserver.unobserve(this._viewport)}_resizeHandler(e){this._changeState(this._resizeUserHandler(this._state,e))}_localEventHandler(e){this._debug&&console.log("nikonov-components: local event catch",e),["submit"].includes(e.type)&&e.preventDefault(),e.stopImmediatePropagation();const t=this._localEvents.get(e.type);this._changeState(t(this._state,e))}_globalEventHandler(e){this._debug&&console.log("nikonov-components: global event catch",e);const t=this._globalEvents.get(e.type);this._changeState(t(this._state,e))}_redraw(){const e=this._render(this._state);this._debug&&console.log("nikonov-components: redraw",this._root.cloneNode(!0),e.cloneNode(!0)),this._root.isEqualNode(e)||(this._root.nodeName!==e.nodeName?(this._root.replaceWith(e),this._root=e):P(this._root,e,{getNodeKey:e=>e instanceof W?e.dataset.id:e.id,onBeforeNodeAdded:e=>e instanceof W&&e.classList.contains("stub")?e.reference.deref():e,onBeforeElUpdated:(e,t)=>!e.isEqualNode(t)&&(!(t instanceof W)||(t.classList.contains("viewport")?t:t.reference.deref()))}))}_emitEvents(e){for(let[t,n]of this._emit)if(t(e,this._state))for(let e of n)this._viewport.dispatchEvent(e(this._state))}_changeState(e){if(this._state===e)return;const t=this._state;this._state=e,this._deferredRedraw||(setTimeout((()=>{this._redraw(),this._deferredRedraw=!1}),0),this._deferredRedraw=!0),this._emitEvents(t),this._debug&&console.log("nikonov-components: transition from",t,"to",this._state)}}const X=new FinalizationRegistry((e=>{e._debug&&console.log("nikonov-components gc:",e._id,JSON.parse(JSON.stringify(e._state))),e.destructor()}));class K{_core;constructor(e){this._core=new q(e),X.register(this,this._core)}}const J=e=>new K(e),$=e=>e._core._state,Y=e=>{if(!e._core._viewport.isConnected)return e._core._viewport;const t=document.createElement("reactor-viewport");return t.classList.add("stub"),t.dataset.id=e._core._id,t.reference=new WeakRef(e._core._viewport),t};var Z=L.L8;const Q=e=>({left:e.left.slice(0,-1),value:e.left[e.left.length-1],right:[e.value].concat(e.right)}),ee=(e,t)=>0===e.left.length?t:e.left[e.left.length-1].disabled?ee(Q(e),t):Q(e),te=e=>ee(e,e),ne=e=>({left:e.left.concat(e.value),value:e.right[0],right:e.right.slice(1)}),oe=(e,t)=>0===e.right.length?t:e.right[0].disabled?oe(ne(e),t):ne(e),re=e=>oe(e,e);var ie={d:(e,t)=>{for(var n in t)ie.o(t,n)&&!ie.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},ae={};ie.d(ae,{qM:()=>ue,E1:()=>ce,_u:()=>se,_w:()=>le,Er:()=>de});var se={};ie.r(se),ie.d(se,{EMPTY_LIST:()=>fe,concat:()=>we,cons:()=>pe,count:()=>Se,filter:()=>ge,find:()=>Ee,fold:()=>me,isEmpty:()=>he,list:()=>ve,map:()=>be,prepend:()=>ye,reverse:()=>_e});var le={};ie.r(le),ie.d(le,{apply:()=>Ae,ifNotError:()=>xe,ifNotFalse:()=>Ne});var de={};ie.r(de);var ce={};ie.r(ce),ie.d(ce,{array:()=>Te});var ue={};ie.r(ue),ie.d(ue,{local:()=>Ce});const fe=null,pe=(e,t)=>({first:e,rest:t}),he=e=>fe===e,ve=(...e)=>e.reduce(((e,t)=>pe(t,e)),fe),me=(e,t,n)=>he(e)?n:t(e.first,me(e.rest,t,n)),be=(e,t)=>me(e,((e,n)=>pe(t(e),n)),fe),ge=(e,t)=>me(e,((e,n)=>t(e)?pe(e,n):n),fe),we=(e,t)=>me(e,pe,t),ye=(e,t)=>we(e,ve(t)),_e=e=>me(e,((e,t)=>ye(t,e)),fe),Ee=(e,t)=>!he(e)&&(t(e.first)?e.first:Ee(e.rest,t)),Se=e=>he(e)?0:Se(e.rest)+1,Ae=e=>(t,n)=>e(t)?t:n(t),Ne=Ae((e=>!1===e)),xe=Ae((e=>e instanceof Error)),Te=(e,t)=>Array.apply(null,Array(e)).map(((e,n)=>t(n))),Ce=(e,t)=>t(e);var Le=ae.qM;const{local:Re}=Le,ke={position:"absolute",top:"100%",left:0,width:"100%",listStyleType:"none",paddingLeft:0,margin:0,overflow:"hidden",boxSizing:"border-box",zIndex:1},Oe={display:"inline-block",lineHeight:"initial",verticalAlign:"middle",width:"100%",boxSizing:"border-box"},Ue=e=>"selection"in e&&"object"==typeof e.selection,He=e=>({...e,selection:void 0}),Me=(e,t)=>({...e,selection:t}),Ie=e=>({...e,options:e.selection}),ze=e=>e.options.value,Pe=e=>g("li",{className:"dropdown-option"+(e.option.class?` ${e.option.class}`:""),style:{backgroundColor:e.selected?"blue":void 0,color:e.option.disabled?"lightgrey":void 0},"data-selected":e.selected,"data-disabled":e.option.disabled,"data-value":e.option.value,children:g("span",{className:"dropdown-option-label",style:Oe,dangerouslySetInnerHTML:{__html:e.option.label}})}),De=e=>Ue(e)?g("ul",{className:"dropdown-options",style:ke,children:[e.selection.left.map((e=>g(Pe,{option:e}))),g(Pe,{option:e.selection.value,selected:!0}),e.selection.right.map((e=>g(Pe,{option:e})))]}):g("span",{}),je=e=>"disabled"in e.dataset,Fe=e=>Re(e.className.replace("dropdown-option","").trim(),(e=>""===e?void 0:e)),Ve=e=>e instanceof HTMLElement?e.closest(".dropdown-option"):null,Be=e=>Array.prototype.indexOf.call(e.parentElement.children,e),Ge=e=>Array.prototype.slice.call(e.parentElement.children,0,Be(e)),We=e=>Array.prototype.slice.call(e.parentElement.children,Be(e)+1),qe=e=>({value:e.dataset.value,label:e.querySelector(".dropdown-option-label").innerHTML,disabled:je(e),class:Fe(e)}),Xe={position:"relative",textAlign:"left",cursor:"pointer"},Ke={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",boxSizing:"border-box"},Je=e=>"focused"in e&&!0===e.focused,$e=e=>"opened"in e&&"object"==typeof e.opened,Ye=(e,t)=>$e(e)&&e.opened===t?e:{...e,opened:t},Ze=(e,t)=>e.options===t?e:{...e,options:t},Qe=e=>Je(e),et=e=>Qe(e)&&$e(e),tt=e=>{return t=e,{...t,focused:!0};var t},nt=e=>Ye(e,(e=>{return t={options:e},{...t,selection:t.options};var t})(e.options)),ot=e=>{return t=Ze(e,(e=>e.options)(e.opened)),{...t,opened:void 0};var t},rt=e=>Ue(e.opened)?e:ot(e),it=e=>g("div",{className:"dropdown-value",style:Ke,children:et(e)?ze(e.opened).label:e.options.value.label}),at=e=>g("div",{className:"dropdown"+(et(e)?" opened":"")+(e.className?` ${e.className}`:""),tabIndex:0,style:Xe,children:[g(it,{...e}),et(e)?g(De,{...e.opened}):g("span",{})]}),st=(e,t)=>Qe(e)?e:tt(e),lt=(e,t)=>Qe(e)?(e=>{return t=e,{...t,focused:void 0};var t})(et(e)?ot(e):e):e,dt=(e,t)=>Je(e)?$e(e)?rt(Ye(e,((e,t)=>Ue(e)?Re(Ve(t.target),(t=>!t||je(t)?e:He(Ie(e)))):e)(e.opened,t))):nt(e):nt(tt(e)),ct=(e,t)=>et(e)&&(e=>e.target instanceof HTMLElement&&e.target.matches(".dropdown-options, .dropdown-options *"))(t)?Ye(e,((e,t)=>Ue(e)?Re(Ve(t.target),(t=>t instanceof HTMLElement&&Be(t)!==(e=>e.selection.left.length)(e)&&!je(t)?Me(e,(e=>({left:Ge(e).map(qe),value:qe(e),right:We(e).map(qe)}))(t)):e)):e)(e.opened,t)):e,ut=(e,t)=>Qe(e)?$e(e)?rt(Ye(e,((e,t)=>Ue(e)?t.altKey?["ArrowDown","ArrowUp"].includes(t.code)?He(e):e:["Escape","Enter"].includes(t.code)?He("Enter"===t.code?Ie(e):e):"ArrowDown"===t.code?Ie(Me(e,re(e.selection))):"ArrowUp"===t.code?Ie(Me(e,te(e.selection))):e:e)(e.opened,t))):((e,t)=>t.ctrlKey?e:t.altKey?["ArrowDown","ArrowUp"].includes(t.code)?nt(e):e:["Enter","Space"].includes(t.code)?nt(e):"ArrowDown"===t.code?Ze(e,re(e.options)):"ArrowLeft"===t.code||"ArrowUp"===t.code?Ze(e,te(e.options)):"ArrowRight"===t.code?Ze(e,re(e.options)):e)(e,t):e,ft=e=>e.options.value,pt=(e,t)=>!et(t)&&ft(e)!==ft(t),ht=e=>new CustomEvent("change",{detail:ft(e),bubbles:!0}),vt=e=>Z({initialState:{options:e.options,className:e.className},render:at,events:{focus:st,blur:lt,click:dt,mouseover:ct,keydown:ut},emit:[{when:pt,emit:ht}],id:e.id,styles:e.styles});var mt=t.L;export{mt as make};